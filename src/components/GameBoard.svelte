<script>
  import { createEventDispatcher } from 'svelte';
  import SearchBar from './SearchBar.svelte';
  import GuessList from './GuessList.svelte';
  import GameInfo from './GameInfo.svelte';
  import RewindDateSelector from './RewindDateSelector.svelte';
  import { highContrast } from '../routes/store.js'
  
  // Props for the component
  export let mode = 'normal'; // Default to normal game mode
  export let currentArtist = null; // The current mystery artist
  export let gameGuesses = []; // Current game guesses
  export let isGameOver = false; // Whether the game is over
  export let rewindDates = []; // Dates for rewind mode
  export let rewindIndex = 0; // Current index in rewind mode
  export let blurResults = false; // Whether to blur the results
  export let challengeNote = ''; // Note for challenge mode
  export let lastSixDaysArtists = []; // Artists for rewind mode - added to pass to RewindDateSelector
  
  const dispatch = createEventDispatcher();
  
  // Handle artist search/selection
  function handleArtistSearch(event) {
    const artistName = event.detail;
    dispatch('guess', { artistName });
  }
  
  // Handle date selection in rewind mode
  function handleDateSelect(event) {
    dispatch('rewindSelect', { index: event.detail.index });
  }
</script>

<div class="game-container" style={blurResults ? "filter: blur(3px)" : ""}>
<!-- Rewind date selector (only in rewind mode) - moved this above Game Info -->
{#if mode === 'rewind'}
  <RewindDateSelector 
    dates={rewindDates}
    currentIndex={rewindIndex}
    lastSixDaysArtists={lastSixDaysArtists}
    on:selectDate={handleDateSelect}
  />
{/if}

<!-- Game info (e.g., guess count) -->
<GameInfo 
  {mode} 
  guessCount={gameGuesses.length} 
  maxGuesses={10}
/>

<!-- Search bar for guessing -->
<div class="search-bar-container">
  <SearchBar 
    disabled={isGameOver} 
    on:search={handleArtistSearch} 
  />
</div>

<!-- Challenge hint display -->
{#if mode === 'challenge' && gameGuesses.length === 0 && challengeNote !== ''}
  <p class="in-game-text">
    A hint from your friend: {challengeNote}
  </p>
{/if}

<!-- Display guesses -->
{#if mode !== 'create'}
  <GuessList
    guesses={gameGuesses}
    mysteryArtist={currentArtist}
    {isGameOver}
    normalGame={mode === 'normal'}
  />
{/if}

<!-- First time instructions -->
{#if mode === 'normal' && gameGuesses.length === 0}
  <p class="in-game-text">Guess the artist of the day.</p>
  <p class="in-game-text">
    Search for an artist to make your first guess.
  </p>
{/if}

<!-- Instruction graphic for first-time users -->
{#if mode === 'normal' && gameGuesses.length === 1 && !isGameOver}
  <!-- SVG instruction graphic will be added by you -->
  {#if !$highContrast}
  <div class="instruction-graphic-placeholder">
    <svg
      class="in-game-svg"
      width="275"
      height="44"
      viewBox="0 0 315 50"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <rect width="100" height="50" rx="10" fill="#454545" />
      <rect x="108" width="100" height="50" rx="10" fill="#FFE600" />
      <rect x="215" width="100" height="50" rx="10" fill="#00B011" />
      <path
        d="M27.3513 19.8182V30H26.4465L20.4308 21.4737H20.3513V30H19.4216V19.8182H20.3215L26.357 28.3544H26.4365V19.8182H27.3513ZM32.8424 30.1591C32.1829 30.1591 31.5995 29.9917 31.0924 29.657C30.5886 29.3222 30.1942 28.8598 29.9092 28.2699C29.6241 27.6766 29.4816 26.9922 29.4816 26.2166C29.4816 25.4344 29.6241 24.7467 29.9092 24.1534C30.1942 23.5568 30.5886 23.0928 31.0924 22.7614C31.5995 22.4266 32.1829 22.2592 32.8424 22.2592C33.502 22.2592 34.0837 22.4266 34.5874 22.7614C35.0912 23.0961 35.4856 23.5601 35.7707 24.1534C36.059 24.7467 36.2032 25.4344 36.2032 26.2166C36.2032 26.9922 36.0607 27.6766 35.7757 28.2699C35.4906 28.8598 35.0945 29.3222 34.5874 29.657C34.0837 29.9917 33.502 30.1591 32.8424 30.1591ZM32.8424 29.3487C33.3727 29.3487 33.8218 29.2062 34.1897 28.9212C34.5576 28.6361 34.836 28.2566 35.0249 27.7827C35.2172 27.3087 35.3133 26.7867 35.3133 26.2166C35.3133 25.6465 35.2172 25.1229 35.0249 24.6456C34.836 24.1683 34.5576 23.7855 34.1897 23.4972C33.8218 23.2088 33.3727 23.0646 32.8424 23.0646C32.3154 23.0646 31.8663 23.2088 31.4951 23.4972C31.1272 23.7855 30.8472 24.1683 30.6549 24.6456C30.466 25.1229 30.3715 25.6465 30.3715 26.2166C30.3715 26.7867 30.466 27.3087 30.6549 27.7827C30.8472 28.2566 31.1272 28.6361 31.4951 28.9212C31.863 29.2062 32.3121 29.3487 32.8424 29.3487ZM42.2673 19.8182H43.3412L47.0351 28.6875H47.1246L50.8184 19.8182H51.8923V30H51.0173V21.782H50.9378L47.5024 30H46.6572L43.2219 21.782H43.1423V30H42.2673V19.8182ZM56.5482 30.174C56.0875 30.174 55.6666 30.0845 55.2854 29.9055C54.9043 29.7232 54.601 29.4614 54.3756 29.12C54.1502 28.7753 54.0376 28.3577 54.0376 27.8672C54.0376 27.4893 54.1088 27.1712 54.2513 26.9126C54.3939 26.6541 54.596 26.442 54.8579 26.2763C55.1197 26.1106 55.4296 25.9796 55.7876 25.8835C56.1455 25.7874 56.5399 25.7128 56.9708 25.6598C57.3983 25.6068 57.7596 25.5604 58.0546 25.5206C58.3529 25.4808 58.5799 25.4179 58.7357 25.3317C58.8915 25.2455 58.9694 25.1063 58.9694 24.9141V24.7351C58.9694 24.2147 58.8136 23.8054 58.502 23.5071C58.1938 23.2055 57.7497 23.0547 57.1697 23.0547C56.6195 23.0547 56.1704 23.1757 55.8224 23.4176C55.4777 23.6596 55.2357 23.9446 55.0965 24.2727L54.2563 23.9695C54.4287 23.5518 54.6673 23.2187 54.9722 22.9702C55.2771 22.7183 55.6185 22.5376 55.9964 22.4283C56.3742 22.3156 56.757 22.2592 57.1448 22.2592C57.4365 22.2592 57.7397 22.2973 58.0546 22.3736C58.3728 22.4498 58.6678 22.5824 58.9395 22.7713C59.2113 22.9569 59.4317 23.2171 59.6008 23.5518C59.7698 23.8833 59.8543 24.3042 59.8543 24.8146V30H58.9694V28.7919H58.9147C58.8086 29.0173 58.6512 29.236 58.4424 29.4482C58.2336 29.6603 57.9717 29.8343 57.6569 29.9702C57.342 30.1061 56.9724 30.174 56.5482 30.174ZM56.6675 29.3636C57.1382 29.3636 57.5458 29.2592 57.8905 29.0504C58.2352 28.8416 58.5004 28.5649 58.686 28.2202C58.8749 27.8722 58.9694 27.4893 58.9694 27.0717V25.968C58.9031 26.031 58.7921 26.0874 58.6363 26.1371C58.4838 26.1868 58.3065 26.2315 58.1043 26.2713C57.9055 26.3078 57.7066 26.3393 57.5077 26.3658C57.3089 26.3923 57.1299 26.4155 56.9708 26.4354C56.5399 26.4884 56.172 26.5713 55.8671 26.6839C55.5622 26.7966 55.3285 26.9524 55.1661 27.1513C55.0037 27.3468 54.9225 27.5987 54.9225 27.907C54.9225 28.371 55.0882 28.7306 55.4197 28.9858C55.7511 29.2377 56.1671 29.3636 56.6675 29.3636ZM65.2162 22.3636V23.1342H61.572V22.3636H65.2162ZM62.7105 20.5341H63.6004V28.0064C63.6004 28.3246 63.6551 28.5748 63.7645 28.7571C63.8738 28.9361 64.0164 29.0637 64.192 29.1399C64.3677 29.2128 64.555 29.2493 64.7538 29.2493C64.8698 29.2493 64.9693 29.2427 65.0521 29.2294C65.135 29.2128 65.2079 29.1963 65.2709 29.1797L65.4598 29.9801C65.3736 30.0133 65.2675 30.0431 65.1416 30.0696C65.0157 30.0994 64.8599 30.1143 64.6743 30.1143C64.3495 30.1143 64.0363 30.0431 63.7346 29.9006C63.4363 29.758 63.1911 29.5459 62.9988 29.2642C62.8066 28.9825 62.7105 28.6328 62.7105 28.2152V20.5341ZM70.1269 30.1591C69.4441 30.1591 68.8492 29.9884 68.3421 29.647C67.8383 29.3056 67.4472 28.8383 67.1688 28.245C66.8904 27.6518 66.7512 26.9756 66.7512 26.2166C66.7512 25.451 66.892 24.7699 67.1737 24.1733C67.4588 23.5767 67.8532 23.1094 68.357 22.7713C68.8608 22.4299 69.4458 22.2592 70.1119 22.2592C70.6224 22.2592 71.0847 22.3587 71.499 22.5575C71.9133 22.7531 72.2547 23.0298 72.5232 23.3878C72.795 23.7424 72.9656 24.1567 73.0352 24.6307H72.1404C72.0476 24.1998 71.8238 23.8319 71.4692 23.527C71.1179 23.2187 70.6704 23.0646 70.1269 23.0646C69.6396 23.0646 69.2088 23.1972 68.8343 23.4624C68.4597 23.7242 68.1664 24.0904 67.9543 24.5611C67.7455 25.0284 67.6411 25.5703 67.6411 26.1868C67.6411 26.8066 67.7438 27.3551 67.9493 27.8324C68.1548 28.3063 68.4432 28.6776 68.8144 28.946C69.1889 29.2145 69.6264 29.3487 70.1269 29.3487C70.4649 29.3487 70.7732 29.2857 71.0516 29.1598C71.3333 29.0305 71.5686 28.8482 71.7575 28.6129C71.9498 28.3776 72.079 28.0975 72.1453 27.7727H73.0402C72.9739 28.2334 72.8099 28.6444 72.548 29.0057C72.2895 29.3636 71.9531 29.6454 71.5388 29.8509C71.1278 30.0563 70.6572 30.1591 70.1269 30.1591ZM75.8218 25.2273V30H74.9369V19.8182H75.8218V23.5618H75.9014C76.0803 23.1674 76.3571 22.8525 76.7316 22.6172C77.1095 22.3819 77.5867 22.2642 78.1634 22.2642C78.6805 22.2642 79.1346 22.3703 79.5257 22.5824C79.9168 22.7945 80.2217 23.1077 80.4404 23.522C80.6592 23.9363 80.7686 24.4467 80.7686 25.0533V30H79.8786V25.108C79.8786 24.4782 79.703 23.9827 79.3517 23.6214C79.0036 23.2569 78.533 23.0746 77.9397 23.0746C77.532 23.0746 77.1691 23.1607 76.8509 23.3331C76.5328 23.5054 76.2809 23.754 76.0953 24.0788C75.913 24.4003 75.8218 24.7831 75.8218 25.2273Z"
        fill="white"
      />
      <path
        d="M245.844 19.8182H246.918L250.612 28.6875H250.702L254.396 19.8182H255.469V30H254.594V21.782H254.515L251.08 30H250.234L246.799 21.782H246.719V30H245.844V19.8182ZM260.125 30.174C259.665 30.174 259.244 30.0845 258.863 29.9055C258.481 29.7232 258.178 29.4614 257.953 29.12C257.727 28.7753 257.615 28.3577 257.615 27.8672C257.615 27.4893 257.686 27.1712 257.828 26.9126C257.971 26.6541 258.173 26.442 258.435 26.2763C258.697 26.1106 259.007 25.9796 259.365 25.8835C259.723 25.7874 260.117 25.7128 260.548 25.6598C260.975 25.6068 261.337 25.5604 261.632 25.5206C261.93 25.4808 262.157 25.4179 262.313 25.3317C262.469 25.2455 262.547 25.1063 262.547 24.9141V24.7351C262.547 24.2147 262.391 23.8054 262.079 23.5071C261.771 23.2055 261.327 23.0547 260.747 23.0547C260.197 23.0547 259.748 23.1757 259.4 23.4176C259.055 23.6596 258.813 23.9446 258.674 24.2727L257.833 23.9695C258.006 23.5518 258.244 23.2187 258.549 22.9702C258.854 22.7183 259.196 22.5376 259.574 22.4283C259.951 22.3156 260.334 22.2592 260.722 22.2592C261.014 22.2592 261.317 22.2973 261.632 22.3736C261.95 22.4498 262.245 22.5824 262.517 22.7713C262.788 22.9569 263.009 23.2171 263.178 23.5518C263.347 23.8833 263.431 24.3042 263.431 24.8146V30H262.547V28.7919H262.492C262.386 29.0173 262.228 29.236 262.02 29.4482C261.811 29.6603 261.549 29.8343 261.234 29.9702C260.919 30.1061 260.55 30.174 260.125 30.174ZM260.245 29.3636C260.715 29.3636 261.123 29.2592 261.468 29.0504C261.812 28.8416 262.078 28.5649 262.263 28.2202C262.452 27.8722 262.547 27.4893 262.547 27.0717V25.968C262.48 26.031 262.369 26.0874 262.213 26.1371C262.061 26.1868 261.884 26.2315 261.681 26.2713C261.483 26.3078 261.284 26.3393 261.085 26.3658C260.886 26.3923 260.707 26.4155 260.548 26.4354C260.117 26.4884 259.749 26.5713 259.444 26.6839C259.139 26.7966 258.906 26.9524 258.743 27.1513C258.581 27.3468 258.5 27.5987 258.5 27.907C258.5 28.371 258.665 28.7306 258.997 28.9858C259.328 29.2377 259.744 29.3636 260.245 29.3636ZM268.793 22.3636V23.1342H265.149V22.3636H268.793ZM266.288 20.5341H267.178V28.0064C267.178 28.3246 267.232 28.5748 267.342 28.7571C267.451 28.9361 267.594 29.0637 267.769 29.1399C267.945 29.2128 268.132 29.2493 268.331 29.2493C268.447 29.2493 268.546 29.2427 268.629 29.2294C268.712 29.2128 268.785 29.1963 268.848 29.1797L269.037 29.9801C268.951 30.0133 268.845 30.0431 268.719 30.0696C268.593 30.0994 268.437 30.1143 268.251 30.1143C267.927 30.1143 267.613 30.0431 267.312 29.9006C267.013 29.758 266.768 29.5459 266.576 29.2642C266.384 28.9825 266.288 28.6328 266.288 28.2152V20.5341ZM273.704 30.1591C273.021 30.1591 272.426 29.9884 271.919 29.647C271.415 29.3056 271.024 28.8383 270.746 28.245C270.468 27.6518 270.328 26.9756 270.328 26.2166C270.328 25.451 270.469 24.7699 270.751 24.1733C271.036 23.5767 271.43 23.1094 271.934 22.7713C272.438 22.4299 273.023 22.2592 273.689 22.2592C274.2 22.2592 274.662 22.3587 275.076 22.5575C275.49 22.7531 275.832 23.0298 276.1 23.3878C276.372 23.7424 276.543 24.1567 276.612 24.6307H275.718C275.625 24.1998 275.401 23.8319 275.046 23.527C274.695 23.2187 274.248 23.0646 273.704 23.0646C273.217 23.0646 272.786 23.1972 272.411 23.4624C272.037 23.7242 271.744 24.0904 271.531 24.5611C271.323 25.0284 271.218 25.5703 271.218 26.1868C271.218 26.8066 271.321 27.3551 271.526 27.8324C271.732 28.3063 272.02 28.6776 272.392 28.946C272.766 29.2145 273.204 29.3487 273.704 29.3487C274.042 29.3487 274.35 29.2857 274.629 29.1598C274.91 29.0305 275.146 28.8482 275.335 28.6129C275.527 28.3776 275.656 28.0975 275.722 27.7727H276.617C276.551 28.2334 276.387 28.6444 276.125 29.0057C275.867 29.3636 275.53 29.6454 275.116 29.8509C274.705 30.0563 274.234 30.1591 273.704 30.1591ZM279.399 25.2273V30H278.514V19.8182H279.399V23.5618H279.479C279.657 23.1674 279.934 22.8525 280.309 22.6172C280.687 22.3819 281.164 22.2642 281.741 22.2642C282.258 22.2642 282.712 22.3703 283.103 22.5824C283.494 22.7945 283.799 23.1077 284.018 23.522C284.236 23.9363 284.346 24.4467 284.346 25.0533V30H283.456V25.108C283.456 24.4782 283.28 23.9827 282.929 23.6214C282.581 23.2569 282.11 23.0746 281.517 23.0746C281.109 23.0746 280.746 23.1607 280.428 23.3331C280.11 23.5054 279.858 23.754 279.672 24.0788C279.49 24.4003 279.399 24.7831 279.399 25.2273Z"
        fill="white"
      />
      <path
        d="M148.842 23H147.908C147.838 22.652 147.712 22.3305 147.53 22.0355C147.351 21.7372 147.125 21.477 146.854 21.255C146.582 21.0329 146.274 20.8606 145.929 20.7379C145.584 20.6153 145.211 20.554 144.81 20.554C144.167 20.554 143.581 20.7214 143.05 21.0561C142.523 21.3909 142.101 21.883 141.783 22.5327C141.468 23.179 141.31 23.9711 141.31 24.9091C141.31 25.8537 141.468 26.6491 141.783 27.2955C142.101 27.9418 142.523 28.4323 143.05 28.767C143.581 29.0985 144.167 29.2642 144.81 29.2642C145.211 29.2642 145.584 29.2029 145.929 29.0803C146.274 28.9576 146.582 28.7869 146.854 28.5682C147.125 28.3461 147.351 28.0859 147.53 27.7876C147.712 27.4893 147.838 27.1662 147.908 26.8182H148.842C148.759 27.2855 148.604 27.7214 148.375 28.1257C148.15 28.5268 147.861 28.8781 147.51 29.1797C147.162 29.4813 146.761 29.7166 146.307 29.8857C145.853 30.0547 145.354 30.1392 144.81 30.1392C143.955 30.1392 143.196 29.9254 142.533 29.4979C141.871 29.067 141.35 28.4605 140.972 27.6783C140.598 26.8961 140.411 25.973 140.411 24.9091C140.411 23.8452 140.598 22.9221 140.972 22.1399C141.35 21.3577 141.871 20.7528 142.533 20.3253C143.196 19.8944 143.955 19.679 144.81 19.679C145.354 19.679 145.853 19.7635 146.307 19.9325C146.761 20.0982 147.162 20.3336 147.51 20.6385C147.861 20.9401 148.15 21.2914 148.375 21.6925C148.604 22.0935 148.759 22.5294 148.842 23ZM151.727 19.8182V30H150.842V19.8182H151.727ZM157.037 30.1591C156.377 30.1591 155.794 29.9917 155.287 29.657C154.783 29.3222 154.389 28.8598 154.104 28.2699C153.818 27.6766 153.676 26.9922 153.676 26.2166C153.676 25.4344 153.818 24.7467 154.104 24.1534C154.389 23.5568 154.783 23.0928 155.287 22.7614C155.794 22.4266 156.377 22.2592 157.037 22.2592C157.696 22.2592 158.278 22.4266 158.782 22.7614C159.286 23.0961 159.68 23.5601 159.965 24.1534C160.253 24.7467 160.398 25.4344 160.398 26.2166C160.398 26.9922 160.255 27.6766 159.97 28.2699C159.685 28.8598 159.289 29.3222 158.782 29.657C158.278 29.9917 157.696 30.1591 157.037 30.1591ZM157.037 29.3487C157.567 29.3487 158.016 29.2062 158.384 28.9212C158.752 28.6361 159.03 28.2566 159.219 27.7827C159.412 27.3087 159.508 26.7867 159.508 26.2166C159.508 25.6465 159.412 25.1229 159.219 24.6456C159.03 24.1683 158.752 23.7855 158.384 23.4972C158.016 23.2088 157.567 23.0646 157.037 23.0646C156.51 23.0646 156.061 23.2088 155.689 23.4972C155.322 23.7855 155.041 24.1683 154.849 24.6456C154.66 25.1229 154.566 25.6465 154.566 26.2166C154.566 26.7867 154.66 27.3087 154.849 27.7827C155.041 28.2566 155.322 28.6361 155.689 28.9212C156.057 29.2062 156.506 29.3487 157.037 29.3487ZM167.471 24.0391L166.661 24.2678C166.581 24.0391 166.468 23.8319 166.322 23.6463C166.177 23.4607 165.986 23.3132 165.751 23.2038C165.519 23.0945 165.23 23.0398 164.886 23.0398C164.369 23.0398 163.944 23.1624 163.613 23.4077C163.281 23.6529 163.116 23.9695 163.116 24.3572C163.116 24.6854 163.228 24.9522 163.454 25.1577C163.683 25.3598 164.034 25.5206 164.508 25.6399L165.661 25.9233C166.301 26.0791 166.78 26.326 167.098 26.6641C167.42 27.0021 167.58 27.4264 167.58 27.9368C167.58 28.3677 167.461 28.7505 167.222 29.0852C166.984 29.42 166.651 29.6835 166.223 29.8757C165.799 30.0646 165.307 30.1591 164.746 30.1591C164.001 30.1591 163.386 29.9917 162.902 29.657C162.418 29.3189 162.108 28.8317 161.972 28.1953L162.822 27.9865C162.932 28.4406 163.146 28.7836 163.464 29.0156C163.785 29.2476 164.208 29.3636 164.732 29.3636C165.318 29.3636 165.787 29.2327 166.138 28.9709C166.49 28.7057 166.665 28.3743 166.665 27.9766C166.665 27.6683 166.563 27.4098 166.357 27.201C166.152 26.9889 165.84 26.8331 165.423 26.7337L164.175 26.4354C163.512 26.2763 163.021 26.0244 162.703 25.6797C162.385 25.335 162.226 24.9074 162.226 24.397C162.226 23.9761 162.34 23.6065 162.569 23.2884C162.798 22.9669 163.112 22.715 163.513 22.5327C163.915 22.3504 164.372 22.2592 164.886 22.2592C165.585 22.2592 166.143 22.4183 166.561 22.7365C166.982 23.0514 167.285 23.4856 167.471 24.0391ZM172.605 30.1591C171.893 30.1591 171.276 29.9934 170.756 29.6619C170.235 29.3272 169.833 28.8648 169.548 28.2749C169.266 27.6816 169.125 26.9988 169.125 26.2266C169.125 25.4576 169.266 24.7749 169.548 24.1783C169.833 23.5784 170.226 23.1094 170.726 22.7713C171.23 22.4299 171.811 22.2592 172.471 22.2592C172.885 22.2592 173.285 22.3355 173.669 22.4879C174.054 22.6371 174.398 22.8674 174.703 23.179C175.012 23.4872 175.255 23.8767 175.434 24.3473C175.613 24.8146 175.703 25.3681 175.703 26.0078V26.4453H169.737V25.6648H174.798C174.798 25.1742 174.698 24.7334 174.499 24.3423C174.304 23.9479 174.03 23.6364 173.679 23.4077C173.331 23.179 172.928 23.0646 172.471 23.0646C171.987 23.0646 171.561 23.1939 171.193 23.4524C170.825 23.7109 170.537 24.0523 170.328 24.4766C170.123 24.9008 170.018 25.3648 170.015 25.8686V26.3359C170.015 26.9425 170.119 27.4728 170.328 27.9268C170.54 28.3776 170.84 28.7273 171.228 28.9759C171.616 29.2244 172.075 29.3487 172.605 29.3487C172.967 29.3487 173.283 29.2924 173.555 29.1797C173.83 29.067 174.06 28.9162 174.246 28.7273C174.435 28.535 174.577 28.3246 174.673 28.0959L175.514 28.3693C175.398 28.6908 175.207 28.9875 174.942 29.2592C174.68 29.531 174.352 29.7498 173.958 29.9155C173.566 30.0779 173.116 30.1591 172.605 30.1591Z"
        fill="#3A3A3A"
      />
    </svg>
  </div> 
  {:else}
  <div class="instruction-graphic-placeholder">
    <svg width="275" height="44" viewBox="0 0 315 50" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="100" height="50" rx="10" fill="#454545"/>
      <rect x="108" width="100" height="50" rx="10" fill="#85C0F9"/>
      <rect x="215" width="100" height="50" rx="10" fill="#F5793A"/>
      <path d="M27.0232 19.8182V30H25.6112L20.4358 22.5327H20.3414V30H18.8051V19.8182H20.227L25.4074 27.2955H25.5019V19.8182H27.0232ZM32.3614 30.1541C31.6455 30.1541 31.0207 29.9901 30.4871 29.6619C29.9535 29.3338 29.5392 28.8748 29.2442 28.2848C28.9492 27.6948 28.8018 27.0054 28.8018 26.2166C28.8018 25.4245 28.9492 24.7318 29.2442 24.1385C29.5392 23.5452 29.9535 23.0845 30.4871 22.7564C31.0207 22.4283 31.6455 22.2642 32.3614 22.2642C33.0773 22.2642 33.7021 22.4283 34.2357 22.7564C34.7693 23.0845 35.1836 23.5452 35.4786 24.1385C35.7736 24.7318 35.9211 25.4245 35.9211 26.2166C35.9211 27.0054 35.7736 27.6948 35.4786 28.2848C35.1836 28.8748 34.7693 29.3338 34.2357 29.6619C33.7021 29.9901 33.0773 30.1541 32.3614 30.1541ZM32.3664 28.9062C32.8304 28.9062 33.2149 28.7836 33.5198 28.5384C33.8247 28.2931 34.0501 27.9666 34.1959 27.5589C34.3451 27.1513 34.4197 26.7022 34.4197 26.2116C34.4197 25.7244 34.3451 25.277 34.1959 24.8693C34.0501 24.4583 33.8247 24.1286 33.5198 23.88C33.2149 23.6314 32.8304 23.5071 32.3664 23.5071C31.8991 23.5071 31.5113 23.6314 31.203 23.88C30.8981 24.1286 30.6711 24.4583 30.5219 24.8693C30.3761 25.277 30.3032 25.7244 30.3032 26.2116C30.3032 26.7022 30.3761 27.1513 30.5219 27.5589C30.6711 27.9666 30.8981 28.2931 31.203 28.5384C31.5113 28.7836 31.8991 28.9062 32.3664 28.9062ZM41.4047 19.8182H43.2691L46.5106 27.733H46.6299L49.8714 19.8182H51.7357V30H50.2741V22.6321H50.1796L47.1768 29.9851H45.9637L42.9608 22.6271H42.8664V30H41.4047V19.8182ZM56.0722 30.169C55.5883 30.169 55.1508 30.0795 54.7597 29.9006C54.3686 29.7183 54.0587 29.4548 53.83 29.1101C53.6046 28.7654 53.4919 28.3428 53.4919 27.8423C53.4919 27.4115 53.5748 27.0568 53.7405 26.7784C53.9062 26.5 54.1299 26.2796 54.4117 26.1172C54.6934 25.9548 55.0083 25.8321 55.3563 25.7493C55.7043 25.6664 56.0589 25.6035 56.4202 25.5604C56.8776 25.5073 57.2488 25.4643 57.5338 25.4311C57.8189 25.3946 58.026 25.3366 58.1553 25.2571C58.2845 25.1776 58.3492 25.0483 58.3492 24.8693V24.8345C58.3492 24.4003 58.2265 24.0639 57.9813 23.8253C57.7393 23.5866 57.378 23.4673 56.8975 23.4673C56.397 23.4673 56.0026 23.5784 55.7142 23.8004C55.4292 24.0192 55.232 24.2628 55.1226 24.5312L53.7256 24.2131C53.8913 23.7491 54.1333 23.3745 54.4514 23.0895C54.7729 22.8011 55.1425 22.5923 55.5601 22.4631C55.9777 22.3305 56.4169 22.2642 56.8776 22.2642C57.1825 22.2642 57.5057 22.3007 57.847 22.3736C58.1917 22.4432 58.5132 22.5724 58.8115 22.7614C59.1131 22.9503 59.3601 23.2204 59.5523 23.5717C59.7445 23.9197 59.8406 24.3722 59.8406 24.929V30H58.3889V28.956H58.3293C58.2332 29.1482 58.089 29.3371 57.8968 29.5227C57.7045 29.7083 57.4576 29.8625 57.156 29.9851C56.8544 30.1077 56.4931 30.169 56.0722 30.169ZM56.3953 28.9759C56.8063 28.9759 57.1576 28.8946 57.4493 28.7322C57.7443 28.5698 57.968 28.3577 58.1205 28.0959C58.2762 27.8307 58.3541 27.5473 58.3541 27.2457V26.2614C58.3011 26.3144 58.1984 26.3641 58.0459 26.4105C57.8968 26.4536 57.7261 26.4917 57.5338 26.5249C57.3416 26.5547 57.1543 26.5829 56.972 26.6094C56.7897 26.6326 56.6373 26.6525 56.5146 26.669C56.2263 26.7055 55.9628 26.7668 55.7242 26.853C55.4888 26.9392 55.2999 27.0634 55.1574 27.2259C55.0182 27.3849 54.9486 27.5971 54.9486 27.8622C54.9486 28.2301 55.0845 28.5085 55.3563 28.6974C55.628 28.883 55.9744 28.9759 56.3953 28.9759ZM65.3852 22.3636V23.5568H61.214V22.3636H65.3852ZM62.3327 20.5341H63.8192V27.7578C63.8192 28.0462 63.8622 28.2633 63.9484 28.4091C64.0346 28.5516 64.1456 28.6494 64.2815 28.7024C64.4207 28.7521 64.5715 28.777 64.7339 28.777C64.8532 28.777 64.9577 28.7687 65.0471 28.7521C65.1366 28.7356 65.2062 28.7223 65.2559 28.7124L65.5244 29.9403C65.4382 29.9735 65.3156 30.0066 65.1565 30.0398C64.9974 30.0762 64.7986 30.0961 64.5599 30.0994C64.1688 30.1061 63.8042 30.0365 63.4662 29.8906C63.1281 29.7448 62.8547 29.5194 62.6459 29.2145C62.4371 28.9096 62.3327 28.5268 62.3327 28.0661V20.5341ZM70.1642 30.1541C69.425 30.1541 68.7887 29.9867 68.2551 29.652C67.7248 29.3139 67.3171 28.8482 67.032 28.255C66.747 27.6617 66.6045 26.9822 66.6045 26.2166C66.6045 25.4411 66.7503 24.7566 67.042 24.1634C67.3337 23.5668 67.7446 23.1011 68.2749 22.7663C68.8052 22.4316 69.43 22.2642 70.1492 22.2642C70.7293 22.2642 71.2463 22.3719 71.7004 22.5874C72.1544 22.7995 72.5207 23.0978 72.7991 23.4822C73.0808 23.8667 73.2482 24.3158 73.3012 24.8295H71.8545C71.7749 24.4716 71.5927 24.1634 71.3076 23.9048C71.0259 23.6463 70.6481 23.517 70.1741 23.517C69.7598 23.517 69.3969 23.6264 69.0853 23.8452C68.7771 24.0606 68.5368 24.3688 68.3644 24.7699C68.1921 25.1676 68.1059 25.6383 68.1059 26.1818C68.1059 26.7386 68.1904 27.2192 68.3595 27.6236C68.5285 28.0279 68.7671 28.3411 69.0754 28.5632C69.3869 28.7853 69.7532 28.8963 70.1741 28.8963C70.4558 28.8963 70.711 28.8449 70.9397 28.7422C71.1717 28.6361 71.3656 28.4853 71.5214 28.2898C71.6805 28.0942 71.7915 27.8589 71.8545 27.5838H73.3012C73.2482 28.0777 73.0874 28.5185 72.819 28.9062C72.5505 29.294 72.1909 29.599 71.7401 29.821C71.2927 30.0431 70.7674 30.1541 70.1642 30.1541ZM76.3774 25.4659V30H74.8909V19.8182H76.3575V23.6065H76.452C76.6309 23.1955 76.9044 22.8691 77.2723 22.6271C77.6402 22.3852 78.1208 22.2642 78.714 22.2642C79.2377 22.2642 79.6951 22.3719 80.0862 22.5874C80.4806 22.8028 80.7855 23.1243 81.001 23.5518C81.2197 23.9761 81.3291 24.5064 81.3291 25.1428V30H79.8426V25.3217C79.8426 24.7616 79.6984 24.3274 79.4101 24.0192C79.1217 23.7076 78.7207 23.5518 78.2069 23.5518C77.8556 23.5518 77.5407 23.6264 77.2623 23.7756C76.9872 23.9247 76.7702 24.1435 76.6111 24.4318C76.4553 24.7169 76.3774 25.0616 76.3774 25.4659Z" fill="white"/>
      <path d="M245.105 19.8182H246.969L250.211 27.733H250.33L253.572 19.8182H255.436V30H253.974V22.6321H253.88L250.877 29.9851H249.664L246.661 22.6271H246.567V30H245.105V19.8182ZM259.772 30.169C259.288 30.169 258.851 30.0795 258.46 29.9006C258.069 29.7183 257.759 29.4548 257.53 29.1101C257.305 28.7654 257.192 28.3428 257.192 27.8423C257.192 27.4115 257.275 27.0568 257.441 26.7784C257.606 26.5 257.83 26.2796 258.112 26.1172C258.394 25.9548 258.708 25.8321 259.056 25.7493C259.404 25.6664 259.759 25.6035 260.12 25.5604C260.578 25.5073 260.949 25.4643 261.234 25.4311C261.519 25.3946 261.726 25.3366 261.855 25.2571C261.985 25.1776 262.049 25.0483 262.049 24.8693V24.8345C262.049 24.4003 261.927 24.0639 261.681 23.8253C261.44 23.5866 261.078 23.4673 260.598 23.4673C260.097 23.4673 259.703 23.5784 259.414 23.8004C259.129 24.0192 258.932 24.2628 258.823 24.5312L257.426 24.2131C257.592 23.7491 257.833 23.3745 258.152 23.0895C258.473 22.8011 258.843 22.5923 259.26 22.4631C259.678 22.3305 260.117 22.2642 260.578 22.2642C260.883 22.2642 261.206 22.3007 261.547 22.3736C261.892 22.4432 262.213 22.5724 262.512 22.7614C262.813 22.9503 263.06 23.2204 263.252 23.5717C263.445 23.9197 263.541 24.3722 263.541 24.929V30H262.089V28.956H262.029C261.933 29.1482 261.789 29.3371 261.597 29.5227C261.405 29.7083 261.158 29.8625 260.856 29.9851C260.555 30.1077 260.193 30.169 259.772 30.169ZM260.096 28.9759C260.507 28.9759 260.858 28.8946 261.15 28.7322C261.444 28.5698 261.668 28.3577 261.821 28.0959C261.976 27.8307 262.054 27.5473 262.054 27.2457V26.2614C262.001 26.3144 261.899 26.3641 261.746 26.4105C261.597 26.4536 261.426 26.4917 261.234 26.5249C261.042 26.5547 260.855 26.5829 260.672 26.6094C260.49 26.6326 260.337 26.6525 260.215 26.669C259.926 26.7055 259.663 26.7668 259.424 26.853C259.189 26.9392 259 27.0634 258.858 27.2259C258.718 27.3849 258.649 27.5971 258.649 27.8622C258.649 28.2301 258.785 28.5085 259.056 28.6974C259.328 28.883 259.675 28.9759 260.096 28.9759ZM269.085 22.3636V23.5568H264.914V22.3636H269.085ZM266.033 20.5341H267.519V27.7578C267.519 28.0462 267.562 28.2633 267.649 28.4091C267.735 28.5516 267.846 28.6494 267.982 28.7024C268.121 28.7521 268.272 28.777 268.434 28.777C268.553 28.777 268.658 28.7687 268.747 28.7521C268.837 28.7356 268.906 28.7223 268.956 28.7124L269.225 29.9403C269.138 29.9735 269.016 30.0066 268.857 30.0398C268.698 30.0762 268.499 30.0961 268.26 30.0994C267.869 30.1061 267.504 30.0365 267.166 29.8906C266.828 29.7448 266.555 29.5194 266.346 29.2145C266.137 28.9096 266.033 28.5268 266.033 28.0661V20.5341ZM273.864 30.1541C273.125 30.1541 272.489 29.9867 271.955 29.652C271.425 29.3139 271.017 28.8482 270.732 28.255C270.447 27.6617 270.305 26.9822 270.305 26.2166C270.305 25.4411 270.451 24.7566 270.742 24.1634C271.034 23.5668 271.445 23.1011 271.975 22.7663C272.505 22.4316 273.13 22.2642 273.849 22.2642C274.429 22.2642 274.946 22.3719 275.401 22.5874C275.855 22.7995 276.221 23.0978 276.499 23.4822C276.781 23.8667 276.948 24.3158 277.001 24.8295H275.555C275.475 24.4716 275.293 24.1634 275.008 23.9048C274.726 23.6463 274.348 23.517 273.874 23.517C273.46 23.517 273.097 23.6264 272.786 23.8452C272.477 24.0606 272.237 24.3688 272.065 24.7699C271.892 25.1676 271.806 25.6383 271.806 26.1818C271.806 26.7386 271.891 27.2192 272.06 27.6236C272.229 28.0279 272.467 28.3411 272.776 28.5632C273.087 28.7853 273.453 28.8963 273.874 28.8963C274.156 28.8963 274.411 28.8449 274.64 28.7422C274.872 28.6361 275.066 28.4853 275.222 28.2898C275.381 28.0942 275.492 27.8589 275.555 27.5838H277.001C276.948 28.0777 276.788 28.5185 276.519 28.9062C276.251 29.294 275.891 29.599 275.44 29.821C274.993 30.0431 274.468 30.1541 273.864 30.1541ZM280.078 25.4659V30H278.591V19.8182H280.058V23.6065H280.152C280.331 23.1955 280.605 22.8691 280.972 22.6271C281.34 22.3852 281.821 22.2642 282.414 22.2642C282.938 22.2642 283.395 22.3719 283.786 22.5874C284.181 22.8028 284.486 23.1243 284.701 23.5518C284.92 23.9761 285.029 24.5064 285.029 25.1428V30H283.543V25.3217C283.543 24.7616 283.399 24.3274 283.11 24.0192C282.822 23.7076 282.421 23.5518 281.907 23.5518C281.556 23.5518 281.241 23.6264 280.963 23.7756C280.687 23.9247 280.47 24.1435 280.311 24.4318C280.155 24.7169 280.078 25.0616 280.078 25.4659Z" fill="white"/>
      <path d="M148.442 23.2536H146.583C146.53 22.9486 146.432 22.6785 146.289 22.4432C146.147 22.2045 145.97 22.0024 145.757 21.8366C145.545 21.6709 145.303 21.5466 145.032 21.4638C144.763 21.3776 144.473 21.3345 144.162 21.3345C143.608 21.3345 143.118 21.4737 142.69 21.7521C142.262 22.0272 141.928 22.4316 141.686 22.9652C141.444 23.4955 141.323 24.1435 141.323 24.9091C141.323 25.688 141.444 26.3442 141.686 26.8778C141.931 27.4081 142.266 27.8092 142.69 28.081C143.118 28.3494 143.606 28.4837 144.157 28.4837C144.462 28.4837 144.747 28.4439 145.012 28.3643C145.28 28.2815 145.52 28.1605 145.733 28.0014C145.948 27.8423 146.129 27.6468 146.275 27.4148C146.424 27.1828 146.526 26.9176 146.583 26.6193L148.442 26.6293C148.373 27.1132 148.222 27.5672 147.99 27.9915C147.761 28.4157 147.461 28.7902 147.09 29.1151C146.719 29.4366 146.284 29.6884 145.787 29.8707C145.29 30.0497 144.738 30.1392 144.132 30.1392C143.237 30.1392 142.438 29.9321 141.735 29.5178C141.033 29.1035 140.479 28.5052 140.075 27.723C139.671 26.9408 139.468 26.0028 139.468 24.9091C139.468 23.812 139.672 22.8741 140.08 22.0952C140.488 21.313 141.043 20.7147 141.745 20.3004C142.448 19.8861 143.243 19.679 144.132 19.679C144.699 19.679 145.225 19.7585 145.713 19.9176C146.2 20.0767 146.634 20.3104 147.015 20.6186C147.396 20.9235 147.71 21.2981 147.955 21.7422C148.203 22.183 148.366 22.6868 148.442 23.2536ZM151.851 19.8182V30H150.052V19.8182H151.851ZM157.033 30.1491C156.287 30.1491 155.641 29.9851 155.094 29.657C154.547 29.3288 154.123 28.8698 153.821 28.2798C153.523 27.6899 153.374 27.0005 153.374 26.2116C153.374 25.4228 153.523 24.7318 153.821 24.1385C154.123 23.5452 154.547 23.0845 155.094 22.7564C155.641 22.4283 156.287 22.2642 157.033 22.2642C157.779 22.2642 158.425 22.4283 158.972 22.7564C159.519 23.0845 159.941 23.5452 160.24 24.1385C160.541 24.7318 160.692 25.4228 160.692 26.2116C160.692 27.0005 160.541 27.6899 160.24 28.2798C159.941 28.8698 159.519 29.3288 158.972 29.657C158.425 29.9851 157.779 30.1491 157.033 30.1491ZM157.043 28.7074C157.447 28.7074 157.785 28.5964 158.057 28.3743C158.329 28.1489 158.531 27.8473 158.664 27.4695C158.8 27.0916 158.868 26.6707 158.868 26.2067C158.868 25.7393 158.8 25.3168 158.664 24.9389C158.531 24.5578 158.329 24.2545 158.057 24.0291C157.785 23.8037 157.447 23.6911 157.043 23.6911C156.629 23.6911 156.284 23.8037 156.009 24.0291C155.737 24.2545 155.533 24.5578 155.397 24.9389C155.265 25.3168 155.199 25.7393 155.199 26.2067C155.199 26.6707 155.265 27.0916 155.397 27.4695C155.533 27.8473 155.737 28.1489 156.009 28.3743C156.284 28.5964 156.629 28.7074 157.043 28.7074ZM168.255 24.3821L166.615 24.5611C166.568 24.3954 166.487 24.2396 166.371 24.0938C166.258 23.9479 166.106 23.8303 165.914 23.7408C165.721 23.6513 165.486 23.6065 165.208 23.6065C164.833 23.6065 164.518 23.6877 164.263 23.8501C164.011 24.0125 163.887 24.223 163.89 24.4815C163.887 24.7036 163.968 24.8842 164.134 25.0234C164.303 25.1626 164.581 25.277 164.969 25.3665L166.271 25.6449C166.994 25.8007 167.531 26.0476 167.882 26.3857C168.237 26.7237 168.416 27.1662 168.419 27.7131C168.416 28.1937 168.275 28.6179 167.997 28.9858C167.722 29.3504 167.339 29.6354 166.848 29.8409C166.358 30.0464 165.794 30.1491 165.158 30.1491C164.223 30.1491 163.471 29.9536 162.901 29.5625C162.331 29.1681 161.991 28.6196 161.882 27.9169L163.637 27.7479C163.716 28.0926 163.885 28.3527 164.144 28.5284C164.402 28.7041 164.739 28.7919 165.153 28.7919C165.58 28.7919 165.923 28.7041 166.182 28.5284C166.444 28.3527 166.575 28.1357 166.575 27.8771C166.575 27.6584 166.49 27.4777 166.321 27.3352C166.155 27.1927 165.897 27.0833 165.546 27.0071L164.243 26.7337C163.511 26.5812 162.969 26.3243 162.617 25.9631C162.266 25.5985 162.092 25.1378 162.095 24.581C162.092 24.1103 162.22 23.7027 162.478 23.358C162.74 23.0099 163.103 22.7415 163.567 22.5526C164.034 22.3603 164.573 22.2642 165.183 22.2642C166.078 22.2642 166.782 22.4548 167.296 22.8359C167.813 23.2171 168.133 23.7325 168.255 24.3821ZM173.284 30.1491C172.518 30.1491 171.857 29.9901 171.3 29.6719C170.747 29.3504 170.321 28.8963 170.023 28.3097C169.724 27.7197 169.575 27.0253 169.575 26.2266C169.575 25.4411 169.724 24.7517 170.023 24.1584C170.324 23.5618 170.745 23.0978 171.285 22.7663C171.826 22.4316 172.46 22.2642 173.189 22.2642C173.66 22.2642 174.104 22.3404 174.522 22.4929C174.943 22.642 175.314 22.8741 175.635 23.1889C175.96 23.5038 176.215 23.9048 176.401 24.392C176.587 24.8759 176.68 25.4527 176.68 26.1222V26.674H170.42V25.4609H174.954C174.951 25.1162 174.876 24.8097 174.731 24.5412C174.585 24.2694 174.381 24.0556 174.119 23.8999C173.861 23.7441 173.559 23.6662 173.214 23.6662C172.846 23.6662 172.523 23.7557 172.245 23.9347C171.966 24.1103 171.749 24.3423 171.594 24.6307C171.441 24.9157 171.363 25.2289 171.36 25.5703V26.6293C171.36 27.0734 171.441 27.4545 171.604 27.7727C171.766 28.0876 171.993 28.3295 172.285 28.4986C172.576 28.6643 172.918 28.7472 173.309 28.7472C173.571 28.7472 173.808 28.7107 174.02 28.6378C174.232 28.5616 174.416 28.4505 174.572 28.3047C174.727 28.1589 174.845 27.9782 174.925 27.7628L176.605 27.9517C176.499 28.3958 176.297 28.7836 175.998 29.1151C175.703 29.4432 175.326 29.6984 174.865 29.8807C174.404 30.0597 173.877 30.1491 173.284 30.1491Z" fill="white"/>
    </svg>
  </div>
  {/if}
{/if}

{#if mode === 'normal' && gameGuesses.length == 1 && !isGameOver}
  <p class="in-game-text">
    Use the matching attributes to make more guesses. Good luck!
  </p>
{/if}

<div class="ad-space"></div>
</div>

<style>
.game-container {
  width: 100%;
  max-width: 340px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-bottom: 150px;
}

.search-bar-container {
  width: 100%;
  margin: 5px 0;
  position: relative;
  z-index: 50;
}

.in-game-text {
  width: 320px;
  margin: 10px auto;
  text-align: center;
  color: #fff;
}

.instruction-graphic-placeholder {
  display: block;
  margin: 15px auto;
  height: 44px;
  width: 275px;
}

.ad-space {
  height: 100px;
  margin-top: 20px;
}
</style>